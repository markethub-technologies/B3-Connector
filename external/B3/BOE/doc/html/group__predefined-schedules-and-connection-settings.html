<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.8.11"/>
    <title>OnixS C++ B3 BOE Binary Order Entry: Predefined Schedules and Connection Settings</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="onixs-doxygen.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript">
    $(window).scroll(function() {
        if ($(this).scrollTop() > 1)
        {
            $('header').addClass("sticky");
        }
        else
        {
            $('header').removeClass("sticky");
        }
    });
    </script>
</head>
<body>
<header>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
<tbody>
    <tr style="height: 56px;">
        <td id="projectlogo"><a href="http://www.onixs.biz"><img alt="Logo" src="onixs.svg"/></a></td>
        <td style="padding-left: 0.5em;">
            <div id="projectname">OnixS C++ B3 BOE Binary Order Entry
            &#160;<span id="projectnumber">1.3.0</span>
            </div>
            <div id="projectbrief">API Documentation</div>
        </td>
    </tr>
</tbody>
</table>
</div>
</header>
<div id="wrapper">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="modules.html"><span>Contents</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Predefined Schedules and Connection Settings<div class="ingroups"><a class="el" href="group__advanced-programming.html">Advanced Programming</a> &raquo; <a class="el" href="group__scheduler.html">Scheduling Sessions for Automatic Connection</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>To simplify development, Session Scheduler provides an ability to define session schedules and connecting settings in configuration files for later referencing in the source code.</p>
<p>Once presets are defined in the file, the session scheduler can use them during the instance initialization stage (<a class="el" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionSchedulerOptions.html" title="Scheduler options. ">OnixS::B3::BOE::Scheduling::SessionSchedulerOptions</a> class exposes <a class="el" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionSchedulerOptions.html#aa5030b6048b78eb7e9ec21a043a01c64">OnixS::B3::BOE::Scheduling::SessionSchedulerOptions::configurationFile</a> member for these purposes). Afterwards, both schedules and connection settings can be referenced in the source code using the string identifiers. Scheduler exposes the <a class="el" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionScheduler.html#ab2088bf2146f78b146a8a0a3934b1bba" title="Adds the session to the automatic connection management. ">OnixS::B3::BOE::Scheduling::SessionScheduler::add</a> overload to schedule a session with parameters described in a configuration file. </p>
<h1><a class="anchor" id="preset-usage-example"></a>
Example</h1>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceOnixS_1_1B3_1_1BOE.html">OnixS::B3::BOE</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceOnixS_1_1B3_1_1BOE_1_1Scheduling.html">OnixS::B3::BOE::Scheduling</a>;</div><div class="line"></div><div class="line"><a class="code" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionSchedulerOptions.html">SessionSchedulerOptions</a> schedulerOptions;</div><div class="line"></div><div class="line">schedulerOptions.<a class="code" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionSchedulerOptions.html#aa5030b6048b78eb7e9ec21a043a01c64">configurationFile</a>(<span class="stringliteral">&quot;Scheduler.conf&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionScheduler.html">SessionScheduler</a> scheduler(schedulerOptions);</div><div class="line"></div><div class="line">scheduler.add(&amp;session, <span class="stringliteral">&quot;ScheduleId&quot;</span>, <span class="stringliteral">&quot;ConnectionId&quot;</span>);</div></div><!-- fragment --><p> Moreover, <a class="el" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionScheduler.html" title="Session Scheduler. ">OnixS::B3::BOE::Scheduling::SessionScheduler</a> exposes <a class="el" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionScheduler.html#ac52892db035704923e5092893275a189" title="Looks for the predefined session schedule associated with the given id that was specified in Schedule...">OnixS::B3::BOE::Scheduling::SessionScheduler::findSchedule</a> and <a class="el" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionScheduler.html#ad87a6a48b056d9d11c82c1a3b97787f2" title="Looks for the predefined session connection settings associated with the given id that was specified ...">OnixS::B3::BOE::Scheduling::SessionScheduler::findConnectionSettings</a> members to access real instances of schedules and connection settings described in the configuration file. These members can help when a session has to be registered with a partially predefined configuration.</p>
<h1><a class="anchor" id="partial-preset-usage-example"></a>
Example</h1>
<p>The following example demonstrates how a session can be registered with a predefined schedule, but custom connection settings are not described in the configuration file.</p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceOnixS_1_1B3_1_1BOE.html">OnixS::B3::BOE</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceOnixS_1_1B3_1_1BOE_1_1Scheduling.html">OnixS::B3::BOE::Scheduling</a>;</div><div class="line"></div><div class="line">scheduler.add(&amp;testingEnvironmentSession, *scheduler.findSchedule(<span class="stringliteral">&quot;B3&quot;</span>), <a class="code" href="classOnixS_1_1B3_1_1BOE_1_1Scheduling_1_1SessionConnectionSettings.html">SessionConnectionSettings</a>(<span class="stringliteral">&quot;gateway&quot;</span>, 8000));</div></div><!-- fragment --> <h1><a class="anchor" id="scheduler-configuration-file-reference"></a>
Configuration File Reference</h1>
<p>Description of Scheduler settings has XML-based syntax. The following elements are supported:</p>
<table class="doxtable">
<tr>
<th>Element </th><th>Description  </th></tr>
<tr>
<td><code>SchedulerSettings</code> </td><td>Root element of scheduler's configuration. </td></tr>
<tr>
<td><code>Schedules</code> </td><td>Contains descriptions of predefined schedules. </td></tr>
<tr>
<td><code>Schedule</code> </td><td>Describes attributes of a particular session schedule. </td></tr>
<tr>
<td><code>Connections</code> </td><td>Contains descriptions of predefined session connection settings. </td></tr>
<tr>
<td><code>Connection</code> </td><td>Defines characteristics of a particular session connection. </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>Up-to-date <a href="https://ref.onixs.biz/fix/scheduler/scheduler-settings-1.6.xsd">Scheduler settings configuration schema</a> available on <a href="https://www.onixs.biz/">Corporate Website</a>.</dd></dl>
<h2><a class="anchor" id="schedule-definition-example"></a>
Defining Session Schedule</h2>
<p>Session Schedule description consists in definition of the following attributes for the <code>Schedule</code> element:</p>
<table  class="doxtable">
<tr>
<th>Attribute </th><th>Values </th><th><p class="starttd">Notes </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>id </td><td>Non-empty String </td><td><p class="starttd">It's a unique identifier for the schedule. The value of this attribute is used later in the source code to refer to the described schedule. It must be unique among all schedules.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>firstDay </td><td><code>Sunday</code>, <code>Monday</code>, <code>Tuesday</code>, <code>Wednesday</code>, <code>Thursday</code>, <code>Friday</code>, <code>Saturday</code>  </td><td>Defines the first day of the activity week for session.   </td></tr>
<tr>
<td>lastDay </td><td><code>Sunday</code>, <code>Monday</code>, <code>Tuesday</code>, <code>Wednesday</code>, <code>Thursday</code>, <code>Friday</code>, <code>Saturday</code>  </td><td>Defines the last day of the activity week for session.   </td></tr>
<tr>
<td>logonTime </td><td>Time value from 0:00 till 23:59 in 24 hours format (with optional seconds resolution).  </td><td>Defines the time of logon for a session.   </td></tr>
<tr>
<td>logoutTime </td><td>Time value from 0:00 till 23:59 in 24 hours format (with optional seconds resolution).  </td><td><p class="starttd">Defines the time of logout for a session.  </p>
<p class="endtd"></p>
</td></tr>
</table>
<h2><a class="anchor" id="connection-settings-definition"></a>
Defining Session Connection Settings</h2>
<p>The description of connection settings consists of the definition of the following attributes for the <code>Connection</code> element:</p>
<table  class="doxtable">
<tr>
<th>Attribute  </th><th>Values  </th><th><p class="starttd">Notes  </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td><code>id</code>  </td><td>Non-empty String </td><td><p class="starttd">It's a unique identifier for the settings set. The value of this attribute is used later in the source code to refer to described settings. It must be unique among all settings sets.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><code>host</code>  </td><td>String </td><td>If a session must be logged on in the role of initiator, this parameter defines a remote host to which the session must connect to. Otherwise, the attribute is ignored.   </td></tr>
<tr>
<td><code>port</code> </td><td>Number </td><td><p class="starttd">If a session must be logged on in the role of initiator, this parameter defines a port number to which the session must connect to. Otherwise, the attribute is ignored.  </p>
<p class="endtd"></p>
</td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>It's possible to specify multiple counter parties in session connection settings description. If Scheduler fails to connect session to one counterparty, it will switch, using another one and so on, until a successful connection will be established. For this reason, the session connection settings XML description accepts inner <code>Counterparty</code> nodes with <code>host</code> and <code>port</code> attributes. Inner nodes are ignored if the master <code>Connection</code> node contains <code>host</code> and <code>port</code> attributes.</dd></dl>
<h2><a class="anchor" id="scheduler-configuration-file-referenceExample"></a>
Example</h2>
<p>Below is a typical configuration file for Sessions Scheduler.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;utf-8&quot;</span> ?&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;&lt;<span class="keywordtype">SchedulerSettings</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  <span class="keyword">xmlns:xsi</span>=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  <span class="keyword">xsi:schemaLocation</span>=<span class="stringliteral">&quot;https://ref.onixs.biz/fix/scheduler https://ref.onixs.biz/fix/scheduler/scheduler-settings-1.6.xsd&quot;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;  <span class="keyword">xmlns</span>=<span class="stringliteral">&quot;https://ref.onixs.biz/fix/scheduler&quot;</span> &gt;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  &lt;<span class="keywordtype">Schedules</span>&gt;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    &lt;<span class="keywordtype">Schedule</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        <span class="keyword">id</span>=<span class="stringliteral">&quot;B3&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        <span class="keyword">firstDay</span>=<span class="stringliteral">&quot;Sunday&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        <span class="keyword">logonTime</span>=<span class="stringliteral">&quot;18:00&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        <span class="keyword">lastDay</span>=<span class="stringliteral">&quot;Friday&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        <span class="keyword">logoutTime</span>=<span class="stringliteral">&quot;16:00&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    /&gt;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    &lt;<span class="keywordtype">Schedule</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;      <span class="keyword">id</span>=<span class="stringliteral">&quot;SimpleDaily&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;      <span class="keyword">firstDay</span>=<span class="stringliteral">&quot;Monday&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;      <span class="keyword">lastDay</span>=<span class="stringliteral">&quot;Friday&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;      <span class="keyword">logonTime</span>=<span class="stringliteral">&quot;08:00&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;      <span class="keyword">logoutTime</span>=<span class="stringliteral">&quot;17:00&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;      /&gt;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  &lt;/<span class="keywordtype">Schedules</span>&gt;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  &lt;<span class="keywordtype">Connections</span>&gt;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    &lt;<span class="keywordtype">Connection</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="keyword">id</span>=<span class="stringliteral">&quot;LocalSession&quot;</span>&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        &lt;<span class="keywordtype">Counterparty</span> <span class="keyword">host</span>=<span class="stringliteral">&quot;localhost&quot;</span> <span class="keyword">port</span>=<span class="stringliteral">&quot;4500&quot;</span>/&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    &lt;/<span class="keywordtype">Connection</span>&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    &lt;<span class="keywordtype">Connection</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <span class="keyword">id</span>=<span class="stringliteral">&quot;SessionToTestingEnvironment&quot;</span>&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        &lt;<span class="keywordtype">Counterparty</span> <span class="keyword">host</span>=<span class="stringliteral">&quot;testing-evn.privatedomain.com&quot;</span> <span class="keyword">port</span>=<span class="stringliteral">&quot;8000&quot;</span>/&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    &lt;/<span class="keywordtype">Connection</span>&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    &lt;<span class="keywordtype">Connection</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keyword">id</span>=<span class="stringliteral">&quot;MultiTargetSession&quot;</span>&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        &lt;<span class="keywordtype">Counterparty</span> <span class="keyword">host</span>=<span class="stringliteral">&quot;primary.domain.com&quot;</span> <span class="keyword">port</span>=<span class="stringliteral">&quot;4600&quot;</span>/&gt;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        &lt;<span class="keywordtype">Counterparty</span> <span class="keyword">host</span>=<span class="stringliteral">&quot;secondary.domain.com&quot;</span> <span class="keyword">port</span>=<span class="stringliteral">&quot;4500&quot;</span>/&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    &lt;/<span class="keywordtype">Connection</span>&gt;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  &lt;/<span class="keywordtype">Connections</span>&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;&lt;/<span class="keywordtype">SchedulerSettings</span>&gt;</div></div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<footer>
<hr class="footer"/>
<address class="footer">
    <small>&copy; <a href="http://www.onixs.biz">Onix Solutions [On<span class="corporate-orange">i</span>x<span class="corporate-orange">S</span>]</a>. All rights reserved.</small>
</address>
</footer>
</div> <!-- wrapper -->
</body>
</html>
